pipeline {
    agent any

    environment {
        BAT_FILE = "Jenkins/example.bat" // Replace with the full path to your .bat file
        RECIPIENT = "mincelichan@gmail.com" // Replace with the recipient's email
    }

    stages {
        stage('Run Containers') {
            parallel {
                stage('Run AI Service Containers') {
                    steps {
                        bat """
                        cd model
                        docker-compose down
                        docker-compose up --build -d
                        """
                    }
                }
                stage('Run MongoDB Backend Containers') {
                    steps {
                        bat """
                        cd backend
                        docker-compose down
                        docker-compose up --build -d
                        """
                    }
                }
            }
        }
    }
}